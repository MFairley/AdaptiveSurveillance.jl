scale_color_discrete(name = "Algorithm") +
theme(legend.position = "bottom")
# Publication Table of Results
fap.dt <- false_alarm_prob(atd_ind.dt)
med1.dt <- median_cond_delay(atd_ind.dt, 1)
med50.dt <- median_cond_delay(atd_ind.dt, 50)
med.dt <- rbindlist(list(med1.dt, med50.dt))
tor.dt <- merge(med.dt, fap.dt[, .(p1p2, alg, g, p, fprob_fmt)], by = c("p1p2", "alg", "g"))
tor.dt <- tor.dt[, .(p1p2, alg, g, fprob_fmt, med_fmt)]
tor.dt <-  dcast(tor.dt, p1p2 + alg ~ g, value.var = c("fprob_fmt", "med_fmt"))
tor.dt
source('~/Projects/AdaptiveSurveillance/results/performance_analysis.R')
tor.dt
source('~/Projects/AdaptiveSurveillance/results/performance_analysis.R')
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g)) + xlim(0, 150) +
geom_step() + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme(legend.position = "bottom")
tor.dt
source('~/Projects/AdaptiveSurveillance/results/performance_analysis.R')
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g)) + xlim(0, 150) +
geom_step() + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme(legend.position = "bottom")
tor.dt
install.packages("pammtools")
library(pammtools)
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g)) + xlim(0, 150) +
geom_step() + geom_stepribbon() + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme(legend.position = "bottom")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.1) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme(legend.position = "bottom")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.1, color=NULL) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme(legend.position = "bottom")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.1, color=NA) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme(legend.position = "bottom")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme(legend.position = "bottom")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g)) + xlim(0, 150) +
geom_line() + geom_ribbon(alpha=0.5, color=NA) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme(legend.position = "bottom")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme(legend.position = "bottom")
?geom_step
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme(legend.position = "bottom") +
theme_bw()
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme(legend.position = "bottom") +
theme_bw()
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw(legend.position = "bottom") +
ggsave(paste(output_path, "survival_curves.pdf", sep="/"), width=8, height=8)
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom") +
ggsave(paste(output_path, "survival_curves.pdf", sep="/"), width=8, height=8)
?TeX
TeX("$\\alpha$")
TeX("$\\alpha$", output="text")
TeX("$\\alpha$", output="expression")
TeX("$\\alpha$", output="ast")
tor.dt
source('~/Projects/AdaptiveSurveillance/results/performance_analysis.R')
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
source('~/Projects/AdaptiveSurveillance/results/performance_analysis.R')
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
source('~/Projects/AdaptiveSurveillance/results/performance_analysis.R')
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
source('~/Projects/AdaptiveSurveillance/results/performance_analysis.R')
source('~/Projects/AdaptiveSurveillance/results/performance_analysis.R')
source('~/Projects/AdaptiveSurveillance/results/performance_analysis.R')
source('~/Projects/AdaptiveSurveillance/results/performance_analysis.R')
?facet_grid
p1p2_labels <- c("0.01_0.01"="p_1^0=0.01", "0.01_0.02"="2", "0.02_0.01"="3")
g< - ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g), labeller = label(p1p2 = p1p2_labels)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
g< - ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(rows = vars(p1p2), cols = vars(g), labeller = labeller(p1p2 = p1p2_labels)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
g< - ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(g ~ p1p2, labeller = labeller(p1p2 = p1p2_labels)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
g< - ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(g ~ p1p2) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
g <- ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(g ~ p1p2) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
g
g <- ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
g
g <- ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = labeller(p1p2 = p1p2_labels)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
g
source('~/Projects/AdaptiveSurveillance/results/performance_analysis.R')
source('~/Projects/AdaptiveSurveillance/results/performance_analysis.R')
g <- ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = labeller(p1p2 = p1p2_labels)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
g
p1p2_labels <- c("0.01_0.01"=TeX("p_1^0=0.01"), "0.01_0.02"="2", "0.02_0.01"="3")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = labeller(p1p2 = p1p2_labels)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
p1p2_labels <- c("0.01_0.01"=TeX("$p_1^0=0.01$"), "0.01_0.02"="2", "0.02_0.01"="3")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = labeller(p1p2 = p1p2_labels)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
p1p2_labels
p1p2_labels <- c("0.01_0.01"="apple", "0.01_0.02"="2", "0.02_0.01"="3")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = labeller(p1p2 = p1p2_labels)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed(p1p2 = p1p2_labels)) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
?label_parsed
label_parsed(p1p2_labels)
p1p2_labels <- label_parsed(c("0.01_0.01"=TeX("$p_1^0=0.01$"), "0.01_0.02"="2", "0.02_0.01"="3"))
lalabel_parsed(p1p2_labels)
label_parsed(p1p2_labels)
p1p2_labels <- c("0.01_0.01"=TeX("$p_1^0=0.01$"), "0.01_0.02"="2", "0.02_0.01"="3")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = labeller(p1p2 = label_parsed(p1p2_labels))) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
label_parsed(p1p2_labels)
?TeX
p1p2_labels <- c("0.01_0.01"=TeX("$p_1^0=0.01$", output="text"), "0.01_0.02"="2", "0.02_0.01"="3")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = labeller(p1p2 = label_parsed(p1p2_labels))) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
p1p2_labels <- c("0.01_0.01"=TeX("$p_1^00.01$", output="text"), "0.01_0.02"="2", "0.02_0.01"="3")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = labeller(p1p2 = label_parsed(p1p2_labels))) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
p1p2_labels <- c("0.01_0.01"=TeX("$p_1^0=0.01$", output="expression"), "0.01_0.02"="2", "0.02_0.01"="3")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = labeller(p1p2 = label_parsed(p1p2_labels))) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
p1p2_labels <- c("0.01_0.01"=TeX("$p_1^0 0.01$"), "0.01_0.02"="2", "0.02_0.01"="3")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = labeller(p1p2 = label_parsed(p1p2_labels))) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
?label_wrap_gen
?label_parse
?label_parsed
sfit.dt[, p1p2 := factor(p1p2, levels = p1p2_levels, labels = c("1", "2", "3"))]
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed()) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
sfit.dt[, p1p2 := factor(p1p2, levels = p1p2_levels, labels = c("TeX(\alpha)", "2", "3"))]
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
# Publication plot of survival curves
sfit.dt <- data.table(surv_summary(sfit, data = atd_ind.dt))[, .(p1p2, alg, g, time, surv, upper, lower)]
# add first points of 1.0
sfit_add.dt <- data.table(p1p2 = unique(sfit.dt$p1p2), alg = unique(sfit.dt$alg), g = unique(sfit.dt$g), time = 0, surv = 1.0, upper = 1.0, lower = 1.0)
sfit.dt <- rbindlist(list(sfit.dt, sfit_add.dt))[order(p1p2, alg, g, time)]
sfit.dt[, c("alarm", "alarm_lower", "alarm_upper") := list(1 - surv, 1 - upper, 1 - lower)]
sfit.dt[, p1p2 := factor(p1p2, levels = p1p2_levels, labels = c("TeX(\alpha)", "2", "3"))]
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
# Publication plot of survival curves
sfit.dt <- data.table(surv_summary(sfit, data = atd_ind.dt))[, .(p1p2, alg, g, time, surv, upper, lower)]
# add first points of 1.0
sfit_add.dt <- data.table(p1p2 = unique(sfit.dt$p1p2), alg = unique(sfit.dt$alg), g = unique(sfit.dt$g), time = 0, surv = 1.0, upper = 1.0, lower = 1.0)
sfit.dt <- rbindlist(list(sfit.dt, sfit_add.dt))[order(p1p2, alg, g, time)]
sfit.dt[, c("alarm", "alarm_lower", "alarm_upper") := list(1 - surv, 1 - upper, 1 - lower)]
sfit.dt[, p1p2 := factor(p1p2, levels = p1p2_levels, labels = c(TeX("\alpha"), "2", "3"))]
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
# Publication plot of survival curves
sfit.dt <- data.table(surv_summary(sfit, data = atd_ind.dt))[, .(p1p2, alg, g, time, surv, upper, lower)]
# Publication plot of survival curves
sfit.dt <- data.table(surv_summary(sfit, data = atd_ind.dt))[, .(p1p2, alg, g, time, surv, upper, lower)]
# Publication plot of survival curves
sfit.dt <- data.table(surv_summary(sfit, data = atd_ind.dt))[, .(p1p2, alg, g, time, surv, upper, lower)]
# add first points of 1.0
sfit_add.dt <- data.table(p1p2 = unique(sfit.dt$p1p2), alg = unique(sfit.dt$alg), g = unique(sfit.dt$g), time = 0, surv = 1.0, upper = 1.0, lower = 1.0)
sfit.dt <- rbindlist(list(sfit.dt, sfit_add.dt))[order(p1p2, alg, g, time)]
sfit.dt[, c("alarm", "alarm_lower", "alarm_upper") := list(1 - surv, 1 - upper, 1 - lower)]
sfit.dt[, p1p2 := factor(p1p2, levels = p1p2_levels, labels = c(TeX("$\alpha$"), "2", "3"))]
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
sfit.dt <- data.table(surv_summary(sfit, data = atd_ind.dt))[, .(p1p2, alg, g, time, surv, upper, lower)]
# add first points of 1.0
sfit_add.dt <- data.table(p1p2 = unique(sfit.dt$p1p2), alg = unique(sfit.dt$alg), g = unique(sfit.dt$g), time = 0, surv = 1.0, upper = 1.0, lower = 1.0)
sfit.dt <- rbindlist(list(sfit.dt, sfit_add.dt))[order(p1p2, alg, g, time)]
sfit.dt[, c("alarm", "alarm_lower", "alarm_upper") := list(1 - surv, 1 - upper, 1 - lower)]
sfit.dt[, p1p2 := factor(p1p2, levels = p1p2_levels, labels = c(TeX("$\alpha$"), "2", "3"))]
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
# Publication plot of survival curves
sfit.dt <- data.table(surv_summary(sfit, data = atd_ind.dt))[, .(p1p2, alg, g, time, surv, upper, lower)]
# add first points of 1.0
sfit_add.dt <- data.table(p1p2 = unique(sfit.dt$p1p2), alg = unique(sfit.dt$alg), g = unique(sfit.dt$g), time = 0, surv = 1.0, upper = 1.0, lower = 1.0)
sfit.dt <- rbindlist(list(sfit.dt, sfit_add.dt))[order(p1p2, alg, g, time)]
sfit.dt[, c("alarm", "alarm_lower", "alarm_upper") := list(1 - surv, 1 - upper, 1 - lower)]
levels(sfit.dt$p1p2) <- c("1", "2", "3")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
levels(sfit.dt$p1p2) <- c(TeX("$\alpha$"), "2", "3")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme(legend.position = "bottom")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parse) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
levels(sfit.dt$p1p2) <- c(TeX("$\alpha$", output = "text"), "2", "3")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
levels(sfit.dt$p1p2) <- c(TeX("$\beta = 1$", output = "text"), "2", "3")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
levels(sfit.dt$p1p2) <- c(TeX("$\\beta = 1$", output = "text"), "2", "3")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
levels(sfit.dt$p1p2) <- c(TeX("$p_l^0 = 0.01, p_2^0 = 0.01$"), "2", "3")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
levels(sfit.dt$p1p2) <- c(TeX("$p_l^0 = 0.01, \quad p_2^0 = 0.01$"), "2", "3")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
# Publication plot of survival curves
sfit.dt <- data.table(surv_summary(sfit, data = atd_ind.dt))[, .(p1p2, alg, g, time, surv, upper, lower)]
# add first points of 1.0
sfit_add.dt <- data.table(p1p2 = unique(sfit.dt$p1p2), alg = unique(sfit.dt$alg), g = unique(sfit.dt$g), time = 0, surv = 1.0, upper = 1.0, lower = 1.0)
sfit.dt <- rbindlist(list(sfit.dt, sfit_add.dt))[order(p1p2, alg, g, time)]
sfit.dt[, c("alarm", "alarm_lower", "alarm_upper") := list(1 - surv, 1 - upper, 1 - lower)]
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
levels(sfit.dt$p1p2) <- c(TeX("$p_l^0 = 0.01, p_2^0 = 0.01$"), TeX("$p_l^0 = 0.01, p_2^0 = 0.02$"), TeX("$p_l^0 = 0.02, p_2^0 = 0.01$"))
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
#sfit.dt[, p1p2 := factor(p1p2, levels = p1p2_levels, labels = c(TeX("$\alpha$"), "2", "3"))]
levels(sfit.dt$g) <- c(TeX("$\\Gamma_1=1$"), TeX("$\Gamma_1=50$"))
#sfit.dt[, p1p2 := factor(p1p2, levels = p1p2_levels, labels = c(TeX("$\alpha$"), "2", "3"))]
levels(sfit.dt$g) <- c(TeX("$\\Gamma_1=1$"), TeX("$\\Gamma_1=50$"))
# Publication plot of survival curves
sfit.dt <- data.table(surv_summary(sfit, data = atd_ind.dt))[, .(p1p2, alg, g, time, surv, upper, lower)]
# add first points of 1.0
sfit_add.dt <- data.table(p1p2 = unique(sfit.dt$p1p2), alg = unique(sfit.dt$alg), g = unique(sfit.dt$g), time = 0, surv = 1.0, upper = 1.0, lower = 1.0)
sfit.dt <- rbindlist(list(sfit.dt, sfit_add.dt))[order(p1p2, alg, g, time)]
sfit.dt[, c("alarm", "alarm_lower", "alarm_upper") := list(1 - surv, 1 - upper, 1 - lower)]
#sfit.dt[, p1p2 := factor(p1p2, levels = p1p2_levels, labels = c(TeX("$\alpha$"), "2", "3"))]
levels(sfit.dt$g) <- c(TeX("$\\Gamma_1=1$"), TeX("$\\Gamma_1=50$"))
levels(sfit.dt$p1p2) <- c(TeX("$p_l^0 = 0.01, p_2^0 = 0.01$"), TeX("$p_l^0 = 0.01, p_2^0 = 0.02$"), TeX("$p_l^0 = 0.02, p_2^0 = 0.01$"))
ggplot(sfit.dt, aes(x = time, y = alarm, ymin=alarm_lower, ymax=alarm_upper, fill=alg, color=alg)) +
facet_grid(p1p2 ~ g, labeller = label_parsed) + xlim(0, 150) +
geom_step() + geom_stepribbon(alpha=0.5, color=NA, show.legend=F) + # to do: add CI
xlab("Time (weeks)") + ylab("Cumulative Probability of Alarm in Location 1") +
scale_color_discrete(name = "Algorithm") +
theme_bw() +
theme(legend.position = "bottom")
ggsave(paste(output_path, "survival_curves.pdf", sep="/"), width=6.5, height=6.5)
source('~/Projects/AdaptiveSurveillance/results/example_predictive.R')
ggplot(example_pred.dt, aes(x=i, y = pl, fill = factor(tpmti))) +
facet_grid(vars(ti), labeller = labeller(ti = ti.labs)) +
geom_col(width=1, alpha = 0.5, position = "identity") +
xlab("Number of Positive Tests") + ylab("Probability")  +
scale_fill_discrete(breaks = c(1, 10), name = "Time Horizon") +
theme_bw() +
theme(legend.position="bottom")
source('~/Projects/AdaptiveSurveillance/results/example_predictive.R')
